<?xml version="1.0" encoding="UTF-16" standalone="yes"?>
<?xml-model href="../../yaf.rnc" type="application/xml"?>
<?xml-model href="../../yaf.xsd" type="application/xml"?>
<yaf>
    <!-- Credits of the original file go to Group 1, class 1 of course LAIG school year 2013/2014,
    FEUP, University of Porto -->

    <globals background="0 0 0 1" ambient="0.5 0.6 0.8 1" />

    <fog color="1.0 1.0 1.0 1.0" near="0.0" far="200.0" />

    <skybox size="1000 1000 1000" center="0 0 0" emissive="1 1 1 1" intensity="100"
        front="scenes/hangar/textures/skybox/front.jpg"
        back="scenes/hangar/textures/skybox/back.jpg"
        up="scenes/hangar/textures/skybox/up.jpg"
        down="scenes/hangar/textures/skybox/down.jpg"
        left="scenes/hangar/textures/skybox/left.jpg"
        right="scenes/hangar/textures/skybox/right.jpg" />

    <cameras initial="cam1">
        <perspective id="cam1"
            angle="60"
            near="0.1"
            far="1000"
            location="15 15 15"
            target="0 0.0 0" />

        <orthogonal id="cam2"
            near="-100"
            far="1000"
            location="15 15 15"
            target="0.0 0.0 0.0"
            left="-10"
            right="10"
            bottom="-5"
            top="5"
        />
    </cameras>

    <!-- bloco de texturas. Este bloco tem de existir mas pode estar vazio, se nao forem usadas
    texturas -->
    <textures>
        <texture id="floorTex" filepath="scenes/hangar/textures/floor.jpg" />
        <texture id="wallTex" filepath="scenes/hangar/textures/wall.jpg" />
        <texture id="planeWindowTex" filepath="scenes/hangar/textures/window.png" />
        <texture id="planeNoseTex" filepath="scenes/hangar/textures/nose.png" />
        <texture id="crateTex" filepath="scenes/hangar/textures/crate.jpg" />
        <texture id="crateNormals" filepath="scenes/hangar/textures/crate_normals.jpg" />
    </textures>

    <materials>
        <material id="floorMat"
            emissive="0.0 0.0 0.0 1"
            color="0.8 0.8 0.8 1.0"
            specular="0 0 0 0"
            shininess="0"
            textureref="floorTex"
            texlength_s="8"
            texlength_t="4"
            twosided="true"
        />

        <material id="wallMat"
            emissive="0.0 0.0 0.0 1"
            color="0.8 0.8 0.8 1.0"
            specular="0 0 0 0"
            shininess="0"
            textureref="wallTex"
            texlength_s="8"
            texlength_t="4"
            twosided="true"
        />

        <material id="planeMat"
            emissive="0.0 0.0 0.0 1.0"
            color="0.85 0.85 0.85 1.0"
            specular="0.9 0.9 0.9 1.0"
            shininess="10"
            twosided="true"
        />

        <material id="tireMat"
            color="0.0 0.0 0.0 1"
            specular="0.0 0.0 0.0 0.0"
            shininess="1"
            emissive="0.0 0.0 0.0 0"
        />

        <material id="planeWindowMat"
            emissive="0.0 0.0 0.0 1"
            color="0.85 0.85 0.85 1.0"
            specular="0.9 0.9 0.9 1.0"
            shininess="10"
            textureref="planeWindowTex"
            texlength_s="8"
            texlength_t="4"
            twosided="true"
        />

        <material id="planeNoseMat"
            emissive="0.0 0.0 0.0 1"
            color="0.85 0.85 0.85 1"
            specular="0.9 0.9 0.9 1"
            shininess="10"
            textureref="planeNoseTex"
            texlength_s="8"
            texlength_t="4"
            twosided="true"
        />

        <material id="crateMat"
            emissive="0.0 0.0 0.0 1"
            color="0.85 0.85 0.85 1.0"
            specular="0.9 0.9 0.9 1.0"
            shininess="10"
            textureref="crateTex"
            bumpref="crateNormals"
        />

        <material id="ceilingLightMat"
            emissive="0.0 0.0 0.0 1"
            color="0.85 0.85 0.85 1.0"
            specular="0.9 0.9 0.9 1.0"
            shininess="10"
            twosided="true"
        />

        <material id="wingLightMaterial"
            color="1 .2 .3 1"
            specular="0 0 0 0"
            shininess="0"
            emissive="1 .2 .3 1"
        />
    </materials>

    <graph rootid="scene">
        <node id="scene">
            <children>
                <noderef id="hangar" />
                <noderef id="plane" />
                <noderef id="crate1" />
                <noderef id="crate2" />
                <noderef id="crate3" />
                <noderef id="crate4" />

                <directionallight id="light5"
                    enabled="true"
                    color="1.0 1.0 1.0 1"
                    intensity="1.0"
                    castshadow="true"
                    position="2 2 4"
                />
            </children>
        </node>

        <node id="hangar">
            <transforms>
                <translate value3="-25.0 0.0 25.0" />
            </transforms>

            <children>
                <noderef id="floor" />
                <noderef id="leftWall" />
                <noderef id="backWall" />
                <noderef id="rightWall" />
                <noderef id="ceiling" />
            </children>
        </node>

        <node id="floor">
            <transforms>
                <rotate value3="-90.0 0.0 0.0" />
            </transforms>

            <materialref id="floorMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="60 50" />
                </primitive>
            </children>
        </node>

        <node id="leftWall">
            <transforms>
                <translate value3="0.0 0.0 -50.0" />
            </transforms>

            <materialref id="wallMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="60 20" />
                </primitive>
            </children>
        </node>

        <node id="backWall">
            <transforms>
                <rotate value3="0.0 90.0 0.0" />
            </transforms>

            <materialref id="wallMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="50 20" />
                </primitive>
            </children>
        </node>

        <node id="rightWall">
            <transforms>
                <rotate value3="0.0 180.0 0.0" />
                <translate value3="-60.0 0.0 0.0" />
            </transforms>

            <materialref id="wallMat" />

            <children>
                <primitive>
                    <rectangle xy1="0 0" xy2="60 20" />
                </primitive>
            </children>
        </node>

        <node id="ceiling">

            <transforms>
                <translate value3="0.0 20.0 -50.0" />
            </transforms>

            <materialref id="wallMat" />

            <children>
                <primitive>
                    <nurbs degree_u="1" degree_v="2" parts_u="20" parts_v="20">
                        <controlpoint xx="0" yy="0" zz="00" />
                        <controlpoint xx="0" yy="10" zz="25" />
                        <controlpoint xx="0" yy="0" zz="50" />
                        <controlpoint xx="60" yy="0" zz="0" />
                        <controlpoint xx="60" yy="10" zz="25" />
                        <controlpoint xx="60" yy="0" zz="50" />
                    </nurbs>
                </primitive>
                <primitive>
                    <nurbs degree_u="1" degree_v="2" parts_u="20" parts_v="20">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="0" yy="0" zz="25" />
                        <controlpoint xx="0" yy="0" zz="50" />
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="0" yy="10" zz="25" />
                        <controlpoint xx="0" yy="0" zz="50" />
                    </nurbs>
                </primitive>
                <noderef id="ceilingLight" />
            </children>
        </node>

        <node id="plane" castshadows="true" receiveshadows="true">

            <transforms>
                <rotate value3="0 0 -91" />
                <translate value3="-5.2 0 0" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <noderef id="planeBody" />
                <noderef id="planeNose" />
                <noderef id="planeTail" />
                <noderef id="planeFrontWheel" />
                <noderef id="planeWingSupport" />
            </children>
        </node>

        <node id="planeFrontWheel">

            <transforms>
                <rotate value3="0 0 90" />
                <translate value3="13 -4 0" />
                <rotate value3="0 0 10" />
                <translate value3="0 -.5 0" />
            </transforms>

            <children>
                <noderef id="planeWheel" />
            </children>
        </node>

        <node id="planeBody" castshadows="true" receiveshadows="true">

            <transforms>
                <rotate value3="0 90 0" />
            </transforms>

            <materialref id="planeWindowMat" />

            <children>
                <primitive>
                    <cylinder base="3" top="3" height="20" slices="100" stacks="100" />
                </primitive>
            </children>
        </node>

        <node id="planeNose">
            <transforms>
                <translate value3="0 9.9 0" />
                <scale value3="1 2.5 1" />
                <rotate value3="0 180 0" />
            </transforms>

            <materialref id="planeNoseMat" />

            <children>
                <primitive>
                    <sphere
                        radius="3.0"
                        slices="100"
                        stacks="100"
                        thetastart="0"
                        thetalength="1.57"
                    />
                </primitive>
            </children>
        </node>

        <node id="planeWingSupport" castshadows="true" receiveshadows="true">

            <transforms>
                <rotate value3="-90 0 90" />
                <translate value3="0 -2.2 0" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <noderef id="planeWingSupportBody" />
                <noderef id="planeWingL" />
                <noderef id="planeWingR" />
            </children>
        </node>

        <node id="planeWingSupportBody">

            <transforms>
                <scale value3="3.5 2.5 1.5" />
                <rotate value3="90 0 0" />
            </transforms>

            <children>
                <primitive>
                    <cylinder base="1" top="1" height="3" slices="100" stacks="100" />
                </primitive>
                <noderef id="planeWingSupportFrontEnd" />
                <noderef id="planeWingSupportBackEnd" />
            </children>
        </node>
        <node id="planeWingSupportEnd">

            <transforms>
                <translate value3="0 1.5 0" />
            </transforms>

            <children>
                <primitive>
                    <sphere
                        radius="1.0"
                        slices="100"
                        stacks="100"
                        thetastart="0"
                        thetalength="1.57"
                    />
                </primitive>
            </children>
        </node>
        <node id="planeWingSupportFrontEnd">
            <children>
                <noderef id="planeWingSupportEnd" />
            </children>
        </node>
        <node id="planeWingSupportBackEnd">

            <transforms>
                <rotate value3="180 0 0" />
            </transforms>

            <children>
                <noderef id="planeWingSupportEnd" />
            </children>
        </node>

        <node id="planeWing">

            <transforms>
                <rotate value3="0 -7.5 0" />
                <scale value3="1.5 1.5 1.5" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <primitive>
                    <triangle
                        xyz1="0 0 15"
                        xyz2="0 4 0"
                        xyz3="0 0 0" />
                </primitive>
                <noderef id="wingWheel" />
                <noderef id="planeWingLight" />
            </children>
        </node>

        <node id="planeWingLight">
            <transforms>
                <translate value3="0 0 15" />
            </transforms>

            <materialref id="wingLightMaterial" />

            <children>
                <!--
                We managed to implement blinking but it required us to change MySceneData so the parser does not
                break, so this cannot be used.
                <pointlight id="wingEndLight"
                    intensity="10"
                    enabled="true"
                    color="1 0.2 0.1 1"
                    position="0 0 15"
                    blink_enabled="true"
                    blink_period="1000"
                /> -->
                <pointlight id="wingEndLight"
                    intensity="10"
                    enabled="true"
                    color="1 0.2 0.1 1"
                    position="0 0 0"
                />
                <primitive>
                    <sphere radius=".05" slices="100" stacks="100" />
                </primitive>
            </children>
        </node>

        <node id="wingWheel">
            <transforms>
                <rotate value3="0 0 90" />
                <translate value3="1 -1.751 5" />
            </transforms>

            <children>
                <noderef id="planeWheel" />
            </children>
        </node>

        <node id="planeWingL">
            <transforms>
                <rotate value3="0 -90 -90" />
                <translate value3="0.7 -2 1" />
            </transforms>

            <children>
                <noderef id="planeWing" />
            </children>
        </node>

        <node id="planeWingR">
            <transforms>
                <rotate value3="0 -90 -90" />
                <scale value3="1 1 -1" />
                <translate value3="0.7 -2 -1" />
            </transforms>

            <children>
                <noderef id="planeWing" />
            </children>
        </node>

        <node id="planeTail">

            <transforms>
                <rotate value3="0 0 90" />
                <rotate value3="0 -90 0" />
                <scale value3="3 3 3" />
                <translate value3="0 0 10" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <noderef id="planeTailTop" />
                <noderef id="planeTailBottom" />
                <noderef id="planeTailTip" />
                <noderef id="planeTailTipFlaps" />
            </children>
        </node>

        <node id="planeTailTopHalf">
            <children>
                <primitive>
                    <nurbs degree_u="1" degree_v="3" parts_u="32" parts_v="32">
                        <controlpoint xx="1" yy="0" zz="0" />
                        <controlpoint xx="1" yy="0.55228474983" zz="0" />
                        <controlpoint xx="0.55228474983" yy="1" zz="0" />
                        <controlpoint xx="0" yy="1" zz="0" />

                        <controlpoint xx="0.3" yy="0.8" zz="2" />
                        <controlpoint xx="0.3" yy="1.01045694997" zz="2" />
                        <controlpoint xx="0.16568542494" yy="1.1" zz="2" />
                        <controlpoint xx="0" yy="1.1" zz="2" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="planeTailTopHalf1">
            <children>
                <noderef id="planeTailTopHalf" />
            </children>
        </node>
        <node id="planeTailTopHalf2">
            <transforms>
                <scale value3="-1 1 1" />
            </transforms>

            <children>
                <noderef id="planeTailTopHalf" />
            </children>
        </node>

        <node id="planeTailTop">
            <children>
                <noderef id="planeTailTopHalf1" />
                <noderef id="planeTailTopHalf2" />
            </children>
        </node>

        <node id="planeTailBottomHalf">

            <transforms>
                <scale value3="1 -1 1" />
            </transforms>

            <children>
                <primitive>
                    <nurbs degree_u="1" degree_v="3" parts_u="32" parts_v="32">
                        <controlpoint xx="1" yy="0" zz="0" />
                        <controlpoint xx="1" yy="0.55228474983" zz="0" />
                        <controlpoint xx="0.55228474983" yy="1" zz="0" />
                        <controlpoint xx="0" yy="1" zz="0" />

                        <controlpoint xx="0.3" yy="-0.8" zz="2" />
                        <controlpoint xx="0.3" yy="-0.55228474983" zz="2" />
                        <controlpoint xx="0.16568542494" yy="-.5" zz="2" />
                        <controlpoint xx="0" yy="-.5" zz="2" />
                    </nurbs>
                </primitive>
            </children>
        </node>

        <node id="planeTailBottomHalf1">
            <children>
                <noderef id="planeTailBottomHalf" />
            </children>
        </node>
        <node id="planeTailBottomHalf2">
            <transforms>
                <scale value3="-1 1 1" />
            </transforms>

            <children>
                <noderef id="planeTailBottomHalf" />
            </children>
        </node>

        <node id="planeTailBottom">
            <children>
                <noderef id="planeTailBottomHalf1" />
                <noderef id="planeTailBottomHalf2" />
            </children>
        </node>

        <node id="planeTailTip">

            <transforms>
                <translate value3="0 .975 2.25" />
                <rotate value3="65 0 0" />
            </transforms>

            <children>
                <primitive>
                    <cylinder base=".345" top="0" height="1" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="planeTailTipFlaps">

            <transforms>
                <translate value3="0 1 .7" />
                <scale value3="1 .7 1" />
            </transforms>

            <children>
                <noderef id="planeTailTipFlapsBody" />
                <noderef id="planeTailTipFlapsArms" />
            </children>
        </node>

        <node id="planeTailTipFlapsBody">

            <materialref id="planeMat" />

            <children>
                <primitive>
                    <nurbs degree_u="1" degree_v="1" parts_u="20" parts_v="20">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="0" yy="0" zz="1" />
                        <controlpoint xx="0" yy="2" zz="1.1" />
                        <controlpoint xx="0" yy="2" zz="1.5" />
                    </nurbs>
                </primitive>
            </children>
        </node>
        <node id="planeTailTipFlapsArmHalf">

            <materialref id="planeMat" />

            <children>
                <primitive>
                    <nurbs degree_u="1" degree_v="1" parts_u="20" parts_v="20">
                        <controlpoint xx="0" yy="0" zz="0" />
                        <controlpoint xx="0" yy="0" zz=".4" />
                        <controlpoint xx="1" yy="0" zz=".85" />
                        <controlpoint xx="1" yy="0" zz="1" />
                    </nurbs>
                </primitive>
            </children>
        </node>
        <node id="planeTailTipFlapsArmHalf1">
            <transforms>
                <translate value3="0 2 1.1" />
            </transforms>

            <children>
                <noderef id="planeTailTipFlapsArmHalf" />
            </children>
        </node>
        <node id="planeTailTipFlapsArmHalf2">
            <transforms>
                <rotate value3="0 0 180" />
                <translate value3="0 -2 1.1" />
            </transforms>

            <children>
                <noderef id="planeTailTipFlapsArmHalf" />
            </children>
        </node>
        <node id="planeTailTipFlapsArms">
            <children>
                <noderef id="planeTailTipFlapsArmHalf1" />
                <noderef id="planeTailTipFlapsArmHalf2" />
            </children>
        </node>

        <node id="planeWheelTire">

            <materialref id="tireMat" />

            <children>
                <primitive>
                    <cylinder base="0.5" top="0.5" height="0.2" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="planeWhellSupportArm">

            <transforms>
                <translate value3="0 1 0" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <primitive>
                    <cylinder base="0.1" top="0.1" height="1.5" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="planeWhellSupportHold">

            <transforms>
                <rotate value3="90 0 0" />
            </transforms>

            <materialref id="planeMat" />

            <children>
                <primitive>
                    <cylinder base="0.3" top="0.3" height=".71" slices="32" stacks="32" />
                </primitive>
            </children>
        </node>

        <node id="planeWheelTire1">
            <transforms>
                <rotate value3="90 0 0" />
                <translate value3="0 .25 0" />
            </transforms>

            <children>
                <noderef id="planeWheelTire" />
            </children>
        </node>
        <node id="planeWheelTire2">
            <transforms>
                <rotate value3="90 0 0" />
                <translate value3="0 -.25 0" />
            </transforms>

            <children>
                <noderef id="planeWheelTire" />
            </children>
        </node>

        <node id="planeWheel">

            <transforms>
                <translate value3="0 0 0" />
            </transforms>

            <children>
                <noderef id="planeWheelTire1" />
                <noderef id="planeWheelTire2" />
                <noderef id="planeWhellSupportArm" />
                <noderef id="planeWhellSupportHold" />
            </children>
        </node>

        <node id="crate">

            <materialref id="crateMat" />

            <children>
                <primitive>
                    <box xyz1="0 0 0" xyz2="1 1 1" />
                </primitive>
            </children>
        </node>

        <node id="crate1">

            <transforms>
                <translate value3="10 0.001 20" />
                <scale value3="3 3 3" />
            </transforms>

            <children>
                <noderef id="crate" />
            </children>
        </node>

        <node id="crate2">

            <transforms>
                <translate value3="10 0.001 -20" />
                <scale value3="3 3 4" />
                <rotate value3="0 45 0" />
            </transforms>

            <children>
                <noderef id="crate" />
            </children>
        </node>

        <node id="crate3">

            <transforms>
                <translate value3="-15 0.001 -20" />
                <scale value3="5 5 5" />
            </transforms>

            <children>
                <noderef id="crate" />
            </children>
        </node>

        <node id="crate4">

            <transforms>
                <translate value3="-15.3 5 -18" />
                <scale value3="3 3 3" />
                <rotate value3="0 26 0" />
            </transforms>

            <children>
                <noderef id="crate" />
            </children>
        </node>

        <node id="ceilingLight">

            <materialref id="ceilingLightMat" />

            <transforms>
                <translate value3="30 2.9 25" />
                <rotate value3="0 0 180" />
            </transforms>

            <children>
                <noderef id="ceilingLightArm" />
                <noderef id="ceilingLightHead" />
            </children>
        </node>

        <node id="ceilingLightArm">

            <transforms>
                <translate value3="0 -1 0" />
            </transforms>

            <children>
                <primitive>
                    <cylinder base="0.1" top="0.1" height="2" slices="100" stacks="100" />
                </primitive>
            </children>
        </node>

        <node id="ceilingLightHead">
            <children>
                <primitive>
                    <cylinder base="0.5" top="0.8" height="1" slices="100" stacks="100" />
                </primitive>
                <spotlight id="ceilingLightSource"
                    enabled="true"
                    color=".9 .9 .9 1"
                    angle="20"
                    position="0 -0.5 0"
                    target="0 1 0"
                    intensity="50"
                    distance="25"
                    decay="1"
                    penumbra="0.2"
                    castshadow="true"
                />
            </children>
        </node>
    </graph>
</yaf> 